<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>店舗選択 - シフト表</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    .cards { display: grid; gap: 16px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
    .card { background: #fff; border-radius: 12px; padding: 16px; box-shadow: 0 6px 14px rgba(0,0,0,.06); }
    .card h2 { margin: 0 0 8px; }
    .btns { display: flex; gap: 8px; flex-wrap: wrap; }
    .btn {
      display: inline-block; padding: 10px 14px; border-radius: 8px;
      background: #2563eb; color: #fff; text-decoration: none;
    }
    .btn.secondary { background: #64748b; }
  </style>
</head>
<body>
  <div class="container">
    <h1>店舗を選んでください</h1>

    <div class="cards">
      {% for sid, sname in stores.items() %}
      <div class="card">
        <h2>{{ sname }}</h2>
        <div class="btns">
          <!-- 従業員ログイン（共通パスワード）→ ログイン後は閲覧ページへ -->
          <a class="btn" href="{{ url_for('staff_login', store_id=sid, next=url_for('view', store_id=sid)) }}">従業員ログイン</a>

          <!-- そのまま閲覧に行こうとすると、未ログインなら staff-login にリダイレクトされる -->
          <a class="btn secondary" href="{{ url_for('view', store_id=sid) }}">閲覧だけ</a>

          <!-- 管理者ログイン（成功後、閲覧か編集に戻す。ここでは閲覧へ） -->
          <a class="btn" href="{{ url_for('login_admin', store_id=sid, next=url_for('view', store_id=sid)) }}">管理者ログイン</a>

          <!-- 管理者の編集画面（未ログインなら管理者ログインへ） -->
          <a class="btn secondary" href="{{ url_for('schedule', store_id=sid) }}">シフト編集</a>

          <!-- 名簿・定員（未ログインなら管理者ログインへ） -->
          <a class="btn secondary" href="{{ url_for('settings', store_id=sid) }}">名簿・定員</a>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</body>
</html>
